Version 4
SHEET 1 3624 1316
WIRE -16 -336 -272 -336
WIRE 80 -336 -16 -336
WIRE 352 -336 160 -336
WIRE 624 -336 352 -336
WIRE -336 -320 -400 -320
WIRE -208 -304 -272 -304
WIRE -16 -304 -16 -336
WIRE -1328 -240 -1328 -256
WIRE -1328 -240 -1424 -240
WIRE 624 -224 624 -336
WIRE -400 -208 -400 -320
WIRE -208 -208 -208 -304
WIRE -208 -208 -400 -208
WIRE -1424 -192 -1424 -240
WIRE -1328 -176 -1328 -240
WIRE -16 -176 -16 -224
WIRE -400 -128 -400 -208
WIRE 624 -80 624 -144
WIRE -400 32 -400 -48
WIRE -352 32 -400 32
WIRE -176 32 -272 32
WIRE -400 112 -400 32
WIRE -352 112 -400 112
WIRE -176 112 -176 32
WIRE -176 112 -288 112
WIRE -400 224 -400 112
WIRE -336 224 -400 224
WIRE -176 240 -176 112
WIRE -176 240 -272 240
WIRE -112 240 -176 240
WIRE -96 240 -112 240
WIRE 416 240 320 240
WIRE 528 240 416 240
WIRE 736 240 608 240
WIRE 992 240 736 240
WIRE -736 256 -1056 256
WIRE -576 256 -656 256
WIRE -480 256 -576 256
WIRE -336 256 -480 256
WIRE -576 304 -576 256
WIRE -480 304 -480 256
WIRE 736 320 736 240
WIRE 992 320 992 240
WIRE 320 352 320 240
WIRE -1056 432 -1056 256
WIRE -576 432 -576 368
WIRE -480 432 -480 384
WIRE 320 496 320 432
WIRE 736 496 736 384
WIRE 992 496 992 400
FLAG 320 496 0
FLAG 736 496 0
FLAG 992 496 0
FLAG 416 240 OUT
FLAG -1424 -192 0
FLAG -1328 -336 15V
FLAG -1328 -96 -15V
FLAG -304 -288 15V
FLAG -304 -352 -15V
FLAG -16 -176 0
FLAG -304 208 15V
FLAG -304 272 -15V
FLAG -480 432 0
FLAG -576 432 0
FLAG -112 240 Error
FLAG -1056 432 0
FLAG 624 -80 0
FLAG 352 -336 IN
SYMBOL bv 320 336 R0
SYMATTR InstName B1
SYMATTR Value V=delay(V(Error)*20, 400E-9)
SYMBOL ind 512 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 33µ
SYMBOL cap 720 320 R0
SYMATTR InstName C1
SYMATTR Value 330n
SYMBOL res 976 304 R0
SYMATTR InstName R1
SYMATTR Value 8
SYMBOL OpAmps\\opamp2 -304 -256 R180
SYMATTR InstName U1
SYMATTR Value AD817
SYMBOL voltage -1328 -352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL voltage -1328 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 15
SYMBOL res -32 -320 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 176 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 19k
SYMBOL OpAmps\\opamp2 -304 176 R0
SYMATTR InstName U2
SYMATTR Value AD817
SYMBOL res -416 -144 R0
SYMATTR InstName R4
SYMATTR Value {R2}
SYMBOL res -256 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R1}
SYMBOL cap -288 96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {C}
SYMBOL res -496 288 R0
SYMATTR InstName R6
SYMATTR Value {R1}
SYMBOL cap -592 304 R0
SYMATTR InstName C3
SYMATTR Value {C}
SYMBOL res -640 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {R2}
SYMBOL voltage 624 -240 M0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value ""
TEXT -864 -376 Left 2 !.include "./ad817.lib"
TEXT -1448 520 Left 2 !.ac dec 1000 1 10Meg
TEXT -920 -120 Left 2 !.param C=1n R1=47k R2=1k
